# Как достать сломанный чат Cursor

Если чат «Позиционирование элементов карт для мобильной версии» не открывается (висит «грузится») — данные всё ещё лежат в локальной базе. Их можно вытащить вручную или скриптом.

## Вариант 1: Скрипт (рекомендуется)

1. **Полностью закройте Cursor** (включая фоновые процессы — проверьте диспетчер задач).
2. В корне проекта выполните:
   ```bash
   npm install sql.js --save-dev
   node scripts/extract-cursor-chat.mjs
   ```
   Если скрипт пишет, что файл занят — снова закройте Cursor и повторите.
3. Результат появится в папке **`extracted-chat`** в корне проекта: JSON с чатами, в том числе с нужным по названию.

## Вариант 2: Вручную через DB Browser for SQLite

1. Скачайте [DB Browser for SQLite](https://sqlitebrowser.org/) (бесплатно).
2. **Полностью закройте Cursor.**
3. Откройте в DB Browser файл:
   ```
   %APPDATA%\Cursor\User\workspaceStorage\625825e8ddf7c68ce7c82ad662261529\state.vscdb
   ```
   Полный путь на вашем ПК:
   ```
   C:\Users\<ваш_логин>\AppData\Roaming\Cursor\User\workspaceStorage\625825e8ddf7c68ce7c82ad662261529\state.vscdb
   ```
4. Перейдите на вкладку «Execute SQL» и выполните:
   ```sql
   SELECT key FROM ItemTable WHERE key LIKE '%chat%' OR key LIKE '%aichat%' OR key LIKE '%prompt%';
   ```
5. Посмотрите список ключей. Затем для каждого подходящего ключа (например `workbench.panel.aichat.view.aichat.chatdata`):
   ```sql
   SELECT value FROM ItemTable WHERE key = 'имя_ключа_из_шага_4';
   ```
6. В колонке `value` будет большой JSON. Скопируйте его в текстовый файл, сохраните как `.json`. В этом JSON ищите чат по названию «Позиционирование элементов карт для мобильной версии» — там будут сообщения и ответы.

## Где что лежит

- **Чаты по проекту** хранятся в папке воркспейса:
  `%APPDATA%\Cursor\User\workspaceStorage\<хэш>\state.vscdb`
- Для проекта **Up$Down** хэш папки: **`625825e8ddf7c68ce7c82ad662261529`** (уже подставлен в пути выше).
- Один сломанный чат не трогает остальные: остальные чаты в той же базе остаются на месте.

После того как достали JSON, планы и последний ответ можно скопировать в новый чат или в документ в репозитории.
